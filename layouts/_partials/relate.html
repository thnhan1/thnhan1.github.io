{{/* Related Posts Template */}}
{{ if .Params.readmore }}
<section class="related-posts">
  <h3>{{ index $.Site.Data.l10n $.Site.Language.Lang "readmore" | default "Bài viết liên quan" }}</h3>
  <ul class="related-list">
    {{ range .Params.readmore }}
      {{ $relatedPath := . }}
      {{ $relatedPage := $.Site.GetPage (printf "/writings/%s" $relatedPath) }}
      
      {{ if $relatedPage }}
        <li class="related-item">
          <a href="{{ $relatedPage.Permalink }}" class="related-link">{{ $relatedPage.Title }}</a>
        </li>
      {{ else }}
        <li class="related-item related-item--missing">
          <span class="related-link--disabled">{{ $relatedPath }} (không tìm thấy)</span>
        </li>
      {{ end }}
    {{ end }}
  </ul>
</section>

<style>
.related-posts {
  margin: 2rem 0;
  padding: 1rem 0;
  border-top: 1px solid var(--border-color, #e1e5e9);
}

.related-posts h3 {
  margin: 0 0 0.5rem 0;
  color: var(--text-primary, #333);
  font-size: 1.1rem;
  font-weight: 500;
}

.related-list {
  list-style: none;
  margin: 0;
  padding: 0;
}

.related-item {
  margin: 0.25rem 0;
}

.related-link {
  color: var(--accent-color, #007acc);
  text-decoration: none;
  font-size: 0.95rem;
}

.related-link:hover {
  text-decoration: underline;
}

.related-link--disabled {
  color: var(--text-muted, #999);
  font-size: 0.95rem;
  cursor: not-allowed;
}

.related-item--missing {
  opacity: 0.6;
}
</style>
{{ end }}
